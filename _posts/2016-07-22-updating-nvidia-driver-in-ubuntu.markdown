---
layout: single
title: Ubuntu14.04 에서 NVIDIA GPU 드라이버 최신으로 업데이트 하기. (우분투 로그인 안될 때 해결책)
category: 
 - Linux

tags:
 - NVIDIA
 - GTX980
 - Graphic Driver
 - Ubuntu

summary: 우분투 상에서 최신 NVIDIA 그래픽 드라이버 업데이트 하기
---

간만에 우분투14.04 PC에 소프트웨어 업데이트를 했더니, 리붓을 하고 나서 계정에 비밀번호를 넣어도 로그인이 안된다.
예전에 이 문제로 일주일 넘게 씨름했던 경험이 있는데, 그 때 겨우 찾아낸 원인이 NVIDIA 그래픽 드라이버가 잘못 업데이트 되어 X윈도우가 정상적으로 동장하지 않는 것이었다. 아마도 이번에 소프트웨어 업데이트가 되면서 그래픽 드라이버가 먼가 꼬인 것 같다.

이런 경우에는 직접 수동으로 그래픽 드라이버를 업데이트를 해주면 된다.

# 최신 NVIDIA 그래픽 드라이버 다운
<http://www.nvidia.co.kr/Download/index.aspx?lang=kr> 에서 자신의 그래픽카드 모델과 적절한 OS를 선택하여 드라이버 파일을 다운받는다.(내 경우엔 GTX980+Linux 64bit) 다운받은 파일명은 `NVIDIA-Linux-x86_64-367.35.run` 이고 367.35가 드라이버 버전이다. 이 파일을 노트북에서 받아서 sftp를 통해 설치하고자 하는 PC에 복사하였다.(그래픽 드라이버 문제가 발생하면 x window가 안될 뿐이지 ssh/sftp 연결은 정상동작 한다.)

# X window 종료
그래픽 드라이버를 설치하기 전에 받드시 해야 할 일은 현재 구동중인 X window를 종료하는 일이다. 우분투에서는 lightdm 이라는 x window가 실행되고 있으므로 이것을 다음 명령으로 정지시킨다.

`sudo stop lightdm`

이제 복사해둔 드라이버 파일이 있는 폴더로 가서 다음 명령으로 인스톨러를 실행한다.

`sudo sh NVIDIA-Linux-x86_64-367.35.run`

인스톨러가 실행되면, 기존의 드라이버를 언인스톨할 껀데 계속할꺼냐 묻는다. 당연히 continue를 선택.
그리고 커널 소스 모듈을 DKMS로 등록할껀지 물으면, Yes.
32비트 호환 라이브러리 설치 여부도 Yes.
이제 드라이버가 설치되고, X configration을 자동 업데이트 할껀지 묻는다. Yes

이렇게 하면 드라이버 업데이트가 완료되고, PC를 리붓하면 정상적으로 로긴이 된다. 가끔 최신 드라이버의 경우 버그로 인해 정상 동작하지 않는 경우가 있으니, 그 경우에는 이전 버전의 드라이버로 다시 설치를 시도해 본다.
